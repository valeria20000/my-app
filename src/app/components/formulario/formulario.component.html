<h1>Formulario Reactivo</h1>
<a href="https://angular.io/guide/reactive-forms" target="_blank"
  >Documentacion oficial</a
>
<hr />

<div class="row">
  <button class="btn" (click)="caragarFormulario()">Cargar Formulario</button>
</div>

<div>
  <p>Values:{{ formulario.value | json }}</p>
  <p>Estado:{{ formulario.status | json }}</p>
</div>

<div class="container py-3">
  <div class="row">
    <div class="col-12 col-sm-8 col-md-6 mx-auto">
      <div id="pay-invoice" class="card">
        <div class="card-body">
          <div class="card-title"><h2 class="text-center">Crear Fruta</h2></div>
          <hr />
          <!-- Impotante desactivar las validacion en html5 -->
          <form class="form" [formGroup]="formulario" (ngSubmit)="sumitar()" novalidate>
            <div class="form-group row">
              <label class="col-lg-3 col-form-label form-control-label" for="nombre">Nombre:</label>
              <div class="col-lg-9">
                <input type="text" formControlName="nombre" class="from-control" />
                <small *ngIf=" formulario.controls.nombre.invalid && formulario.controls.nombre.touched" class="form-text text-danger">Minimo 2 Letras y Maximo 50 Letras.</small>
                <small *ngIf="formulario.controls.nombre.valid" class="form-text text-succes" >Correcto</small>
              </div>
            </div>

        <div class="form-group row">
            <label class="col-lg-3 col-form-label form-control-label" for="precio"> Precio: </label>
             <div class="col-lg-9">
                <input type="number" formControlName="precio" class="from-control" min="0.1" max="999" step="0.1"/>
                <small *ngIf="formulario.controls.precio.invalid && formulario.controls.precio.touched" class="form-text text-danger">Minimo 0.1 numero y Maximo 999 numeros.</small>
                <small *ngIf="formulario.controls.precio.valid" class="from-text text-success">Correcto</small>
            </div>
         </div>

         <div class="form-group row">
                <label class="col-lg-3 col-form-label form-control-label" for="calorias"> Calorias: </label>
            <div class="col-lg-9">
                <input type="number" formControlName="calorias" class="from-control" min="0.1" max="9999" step="0.1" />
                <small *ngIf=" formulario.controls.calorias.invalid && formulario.controls.calorias.touched" class="form-text text-danger">Minimo 0.1 numero y Maximo 9999 numeros.</small>
                <small *ngIf="formulario.controls.calorias.valid" class="form-text text-succes">Correcto</small>
            </div>  
        </div>

        <div class="form-group row">
                <label  class="col-lg-3 col-form-label form-control-label">Colores</label>
                <button (click)="nuevoColor()">Nuevo</button>
                <div formArrayName="colores">
                  <div *ngFor="let color of formulario.get('colores').controls; let i = index">
                    <div [formGroupName]="i">
                      <input formControlName="color" />
                      <button (click)="eliminarColor(i)">Eliminar</button>
                      <!--
                        <small *ngIf="formulario.get('colores').controls[i].invalid" class="form-text text-danger">Minimo 2 letras maximo 15</small>
                      -->
                    </div>
                  </div>
                </div>
        </div>
      

        <div class="form-group row">
              <div class="form-check col-md-4">
                <label class="form-check-label" for="oferta"> Oferta: </label>
                <input type="checkbox" formControlName="oferta" class="from-control"/>
              </div>

              <div [hidden]="!formulario.controls.oferta.value" class="form-group col-md-4" >
                <label for="descuento"> Descuento: </label>
                <input type="number" formControlName="descuento" class="from-control" min="5" max="90" step="5"/>
                <small *ngIf="formulario.controls.descuento.invalid && formulario.controls.descuento.touched" class="form-text text-danger">Minimo 5 numeros y Maximo 90 numeros.</small>
                <small *ngIf="formulario.controls.descuento.valid" class="form-text text-succes">Correcto</small>
              </div>
        </div>

        <div class="form-group row">
              <label  class="col-lg-3 col-form-label form-control-label"  for="img"> Imagen: </label>
              <img src="{{formulario.controls.img.value}}" alt="imagen destacada" class="/"/>
              <input type="text" formControlName="img" class="from-control" placeholder="url imagen con extension png, jpg, jpeg"/>
              <small *ngIf="formulario.controls.img.invalid && formulario.controls.img.touched" class="form-text text-danger"> Que empieze por Https o Http y la imagen con extension png, jpg, jpeg.</small>
              <small *ngIf="formulario.controls.img.valid" class="form-text text-succes" >Correcto</small>
           

            <input type="submit" value="crear" class="btn btn-success" [disabled]="formulario.status === 'INVALID'"/>
        </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
